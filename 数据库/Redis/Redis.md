# Redis

## 概述

Redis是使用内存的非关系型数据库，还支持数据的持久化（可存储在硬盘），适用于频繁访问的少量数据

**优点：**

- 性能极高：Redis 将数据储存在内存中，读写数据时不会受到硬盘 I/O 速度的限制，所以速度极快
- 数据类型丰富：Redis支持二进制的 Strings, Lists, Hashes, Sets 及 Ordered Sets 数据类型操作
- 原子性：所有操作都是原子性的，只有成功执行和失败完全不执行；同时支持对多个操作全并后的原子性执行
- 特性丰富：Redis还支持 publish/subscribe（发布/订阅）、通知、key 过期等特性

**与其他key - value数据库区别：**

- Redis支持数据的持久化，可以将内存中的数据保存在磁盘中，重启的时候可以再次加载进行使用
- Redis不仅支持简单的key-value类型的数据，同时还提供list，set，zset，hash等数据结构的存储
- Redis支持数据的备份，即master-slave模式的数据备份

---



## 安装使用

```shell
redis-server						# 在文件所在目录下执行命令，启动数据库
redis-cli								# 连接数据库
set <key> <value>				# 存储键值对，value可以是任意数据类型
get <key>								# 获取键值
keys *									# 获取所有键
del <key>								# 删除指定键值对
```

---



## 数据类型

| 数据类型             | 简介                                                   | 特性                                                         | 场景                                                         |
| :------------------- | :----------------------------------------------------- | :----------------------------------------------------------- | :----------------------------------------------------------- |
| String(字符串)       | 二进制安全                                             | 可以包含任何数据,比如jpg图片或者序列化的对象,一个键最大能存储512M | ---                                                          |
| Hash(字典)           | 键值对集合,即编程语言中的Map类型                       | 适合存储对象,并且可以像数据库中update一个属性一样只修改某一项属性值(Memcached中需要取出整个字符串反序列化成对象修改完再序列化存回去) | 存储、读取、修改用户属性                                     |
| List(列表)           | 链表(双向链表)                                         | 增删快,提供了操作某一段元素的API                             | 1,最新消息排行等功能(比如朋友圈的时间线) 2,消息队列          |
| Set(集合)            | 哈希表实现,元素不重复                                  | 1、添加、删除,查找的复杂度都是O(1) 2、为集合提供了求交集、并集、差集等操作 | 1、共同好友 2、利用唯一性,统计访问网站的所有独立ip 3、好友推荐时,根据tag求交集,大于某个阈值就可以推荐 |
| Sorted Set(有序集合) | 将Set中的元素增加一个权重参数score,元素按score有序排列 | 数据插入集合时,已经进行天然排序                              | 1、排行榜 2、带权重的消息队列                                |

---



## 其他

数据库的工作模式按存储方式可分为：

- 硬盘数据库：MySQL、MongoDB
  - 优点：可存储大量数据，不用担心服务器死机

- 内存数据库：Redis
  - 优点：访问速度极快

